var K=Object.defineProperty;var T=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var $=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j=(e,t)=>{for(var n in t||(t={}))X.call(t,n)&&$(e,n,t[n]);if(T)for(var n of T(t))Y.call(t,n)&&$(e,n,t[n]);return e};import{l as J,r as v,o as A,a as R,b as S,c as G,d as O,e as o,f as s,w as Q,g as C,F as k,h as P,u as y,n as I,i as B,j as q,t as E,k as W,m as Z,p as ee}from"./vendor.42710f15.js";const te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))p(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const _ of i.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&p(_)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function p(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}};te();var ne=[[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," ","d","d","d","d"," "," "," "],[" "," "," ","d"," "," ","d"," "," "," "],[" "," "," ","d"," "," ","d"," "," "," "],[" "," "," ","d","d","d","d"," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "]];const le={transports:["websocket"],upgrade:!1},h=J("wss://berendswennenhuis.nl",j({path:"/path/"},le));function V(e){return e.reduce((t,n,p,l)=>(n==="d"&&(t.length>0&&l[p-1]==="d"?t[t.length-1]++:t.push(1)),t),[])}const m=10,w=v(M(m)),F=v(ne);v();v();function M(e){return new Array(e).fill("").map(n=>new Array(e).fill(" "))}function re(){w.value=M(m)}function U(e){return S.exports.clamp(e,0,m-1)}function oe(e){return V(F.value[e])}function se(e){return V(F.value.map(t=>t[e]))}function D(e){w.value=e}function ie(){A(()=>{h.on("gridUpdated",D)}),R(()=>{h.off("gridUpdated",D)})}let c=v(null),d=v({});const u=G(()=>c.value!==null?d.value[c.value]:null),ae=G(()=>{var e;return(e=u==null?void 0:u.value)==null?void 0:e.position});function z(e){c.value!==null&&(u.value.position,e==="left"&&(d.value[c.value].position[0]=U(d.value[c.value].position[0]-1)),e==="right"&&(d.value[c.value].position[0]=U(d.value[c.value].position[0]+1)),e==="up"&&(d.value[c.value].position[1]=U(d.value[c.value].position[1]-1)),e==="down"&&(d.value[c.value].position[1]=U(d.value[c.value].position[1]+1)),h.emit("cursorPositionChanged",u.value.position))}function H(e){d.value=e}function ue(){h.once("initPlayer",e=>{c.value=e.id})}function ce(){A(()=>{h.on("playersStateUpdated",H)}),R(()=>{h.off("playersStateUpdated",H)})}const x=v({spacePressed:!1,intention:"build"});function b(e){w.value[u.value.position[1]][u.value.position[0]]===e?(x.value.intention="clear",w.value[u.value.position[1]][u.value.position[0]]=" "):(x.value.intention="build",w.value[u.value.position[1]][u.value.position[0]]=e),h.emit("gridUpdated",w.value)}function de(){function e(t){t.key==="ArrowLeft"?(z("left"),x.value.spacePressed&&b("d")):t.key==="ArrowRight"?(z("right"),x.value.spacePressed&&b("d")):t.key==="ArrowUp"?(z("up"),x.value.spacePressed&&b("d")):t.key==="ArrowDown"?(z("down"),x.value.spacePressed&&b("d")):t.key==="f"?b("x"):t.key===" "&&(x.value.spacePressed=!0,b("d"))}A(()=>{window.addEventListener("keydown",e),window.addEventListener("keyup",t=>{t.key===" "&&(x.value.spacePressed=!1)})}),R(()=>{window.removeEventListener("keydown",e)})}const pe=O({setup(e){function t(){re(),h.emit("gridUpdated",w.value),h.emit("suggestClear")}return(n,p)=>(o(),s("button",{onClick:t},"Clear"))}});const fe={class:"optical-guide horizontal",ref:"guidehorizontal"},ve={class:"optical-guide vertical",ref:"guidevertical"},_e=C("div",{class:"corner"},null,-1),ge={class:"legend horizontal",ref:"legendForColumns"},ye={class:"legend vertical",ref:"legendForRows"},he=O({setup(e){ue(),ce(),ie(),de();const t=G(()=>S.exports.isEqual(w.value,F.value));function n(a){const f=a%m,g=Math.floor(a/m);return[f,g]}function p(a){var r;if(S.exports.isEqual(n(a),ae.value))return`
    box-shadow: 0px 0px 0px 2px ${(r=u.value)==null?void 0:r.color};
  `;const g=Object.values(d.value).find(L=>S.exports.isEqual(n(a),L.position));return g?`box-shadow: 0px 0px 0px 2px ${g.color}`:void 0}function l(a,f){const[g,r]=n(a);return w.value[r][g]===f}Q(t,a=>{a&&(q({zIndex:-1,particleCount:50,spread:70,angle:60,origin:{y:.6}}),q({zIndex:-1,particleCount:50,spread:70,angle:120,origin:{y:.6}}))});function i(a){var f;return((f=u.value)==null?void 0:f.position[0])===a}function _(a){var f;return((f=u.value)==null?void 0:f.position[1])===a}return(a,f)=>(o(),s(k,null,[C("div",{class:I(["playfield-container",{cleared:y(t)}])},[C("div",fe,null,512),C("div",ve,null,512),_e,C("div",ge,[(o(!0),s(k,null,P(y(m),(g,r)=>(o(),s("div",{class:I(["cell",{highlighted:i(r)}]),key:r},[(o(!0),s(k,null,P(y(se)(r),(L,N)=>(o(),s("div",{key:N},E(L),1))),128))],2))),128))],512),C("div",ye,[(o(!0),s(k,null,P(y(m),(g,r)=>(o(),s("div",{class:I(["cell",{highlighted:_(r)}]),key:r},[(o(!0),s(k,null,P(y(oe)(r),(L,N)=>(o(),s("div",{key:N},E(L),1))),128))],2))),128))],512),(o(!0),s(k,null,P(y(m)*y(m),(g,r)=>(o(),s("div",{class:I(["cell",{filled:l(r,"d"),flagged:l(r,"x")}]),key:r,style:W(p(r))},null,6))),128))],2),B(pe)],64))}});var me=(e,t)=>{const n=e.__vccOpts||e;for(const[p,l]of t)n[p]=l;return n};const we=O({setup(e){const t=v([]),n=v(null);v(""),A(()=>{console.log("-> inputRef",n)});function p(l){return l.id===c.value}return(l,i)=>(o(),s("header",null,[Z(" Now playing: ("+E(Object.values(y(d)).length)+"): ",1),C("ul",null,[(o(!0),s(k,null,P(y(d),_=>(o(),s("li",{class:I([{"current-player":p(_)},_.id]),ref_for:!0,ref_key:"playersRef",ref:t},E(_.name),3))),256))])]))}});var ke=me(we,[["__scopeId","data-v-274f97a7"]]);const xe=O({setup(e){return(t,n)=>(o(),s(k,null,[B(ke),B(he)],64))}});ee(xe).mount("#app");
