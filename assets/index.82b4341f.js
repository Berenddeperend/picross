import{l as R,r as y,o as E,a as z,c as O,d as q,b as U,w as V,e as B,f as i,g as u,h as $,t as F,u as f,i as k,F as x,j as A,n as I,k as D,m as T,p as H}from"./vendor.93c23019.js";const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))w(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const C of s.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&w(C)}).observe(document,{childList:!0,subtree:!0});function c(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function w(n){if(n.ep)return;n.ep=!0;const s=c(n);fetch(n.href,s)}};K();var X=[[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," ","d","d","d","d"," "," "," "],[" "," "," ","d"," "," ","d"," "," "," "],[" "," "," ","d"," "," ","d"," "," "," "],[" "," "," ","d","d","d","d"," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "]];const h=R("wss://berendswennenhuis.nl",{path:"/path/"});function j(e){return e.reduce((t,c,w,n)=>(c==="d"&&(t.length>0&&n[w-1]==="d"?t[t.length-1]++:t.push(1)),t),[])}const m=10,_=y(Y(m)),N=y(X);y();y();function Y(e){return new Array(e).fill("").map(c=>new Array(e).fill(" "))}function J(e){return j(N.value[e])}function Q(e){return j(N.value.map(t=>t[e]))}function G(e){console.log("setgrid called:",e),_.value=e}function W(){E(()=>{h.on("gridUpdated",G)}),z(()=>{h.off("gridUpdated",G)})}let p=y(null),v=y({});const r=O(()=>p.value!==null?v.value[p.value]:null),Z=O(()=>{var e;return(e=r==null?void 0:r.value)==null?void 0:e.position});function S(e){p.value!==null&&(r.value.position,e==="left"&&v.value[p.value].position[0]--,e==="right"&&v.value[p.value].position[0]++,e==="up"&&v.value[p.value].position[1]--,e==="down"&&v.value[p.value].position[1]++,h.emit("cursorPositionChanged",r.value.position))}function M(e){v.value=e}function ee(){h.once("initPlayer",e=>{p.value=e.id})}function te(){E(()=>{h.on("playersStateUpdated",M)}),z(()=>{h.off("playersStateUpdated",M)})}const g=y({spacePressed:!1,intention:"build"});function P(e){_.value[r.value.position[1]][r.value.position[0]]===e?(g.value.intention="clear",_.value[r.value.position[1]][r.value.position[0]]=" "):(g.value.intention="build",_.value[r.value.position[1]][r.value.position[0]]=e),h.emit("gridUpdated",_.value)}function ne(){function e(t){t.key==="ArrowLeft"?(S("left"),g.value.spacePressed&&P("d")):t.key==="ArrowRight"?(S("right"),g.value.spacePressed&&P("d")):t.key==="ArrowUp"?(S("up"),g.value.spacePressed&&P("d")):t.key==="ArrowDown"?(S("down"),g.value.spacePressed&&P("d")):t.key==="f"?P("x"):t.key===" "&&(g.value.spacePressed=!0,P("d"))}E(()=>{window.addEventListener("keydown",e),window.addEventListener("keyup",t=>{t.key===" "&&(g.value.spacePressed=!1)})}),z(()=>{window.removeEventListener("keydown",e)})}const le={class:"optical-guide horizontal",ref:"guidehorizontal"},oe={class:"optical-guide vertical",ref:"guidevertical"},re=k("div",{class:"corner"},null,-1),se={class:"legend horizontal",ref:"legendForColumns"},ie={class:"legend vertical",ref:"legendForRows"},ae=q({setup(e){ee(),te(),W(),ne();const t=O(()=>U.exports.isEqual(_.value,N.value));function c(o){const a=o%m,d=Math.floor(o/m);return[a,d]}function w(o){var l;if(U.exports.isEqual(c(o),Z.value))return`
    box-shadow: 0px 0px 0px 2px ${(l=r.value)==null?void 0:l.color};
  `;const d=Object.values(v.value).find(L=>U.exports.isEqual(c(o),L.position));return d?`box-shadow: 0px 0px 0px 2px ${d.color}`:void 0}function n(o,a){const[d,l]=c(o);return _.value[l][d]===a}V(t,o=>{o&&(B({zIndex:-1,particleCount:50,spread:70,angle:60,origin:{y:.6}}),B({zIndex:-1,particleCount:50,spread:70,angle:120,origin:{y:.6}}))});function s(o){var a;return((a=r.value)==null?void 0:a.position[0])===o}function C(o){var a;return((a=r.value)==null?void 0:a.position[1])===o}return(o,a)=>(i(),u(x,null,[$(F(f(v))+" ",1),k("div",{class:I(["playfield-container",{cleared:f(t)}])},[k("div",le,null,512),k("div",oe,null,512),re,k("div",se,[(i(!0),u(x,null,A(f(m),(d,l)=>(i(),u("div",{class:I(["cell",{highlighted:s(l)}]),key:l},[(i(!0),u(x,null,A(f(Q)(l),(L,b)=>(i(),u("div",{key:b},F(L),1))),128))],2))),128))],512),k("div",ie,[(i(!0),u(x,null,A(f(m),(d,l)=>(i(),u("div",{class:I(["cell",{highlighted:C(l)}]),key:l},[(i(!0),u(x,null,A(f(J)(l),(L,b)=>(i(),u("div",{key:b},F(L),1))),128))],2))),128))],512),(i(!0),u(x,null,A(f(m)*f(m),(d,l)=>(i(),u("div",{class:I(["cell",{filled:n(l,"d"),flagged:n(l,"x")}]),key:l,style:D(w(l))},null,6))),128))],2)],64))}});const ue=q({setup(e){return(t,c)=>(i(),T(ae))}});H(ue).mount("#app");
